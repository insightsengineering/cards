---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# cards

<!-- badges: start -->
<!-- [![R-CMD-check](https://github.com/insightsengineering/cards/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/insightsengineering/cards/actions/workflows/R-CMD-check.yaml) -->
<!-- [![Codecov test coverage](https://codecov.io/gh/insightsengineering/cards/branch/main/graph/badge.svg)](https://app.codecov.io/gh/insightsengineering/cards?branch=main) -->
<!-- badges: end -->

This package is in a **preliminary state**, and **breaking changes** will be made **without notice or deprecation**.

The [CDISC Analysis Results Standard](https://www.cdisc.org/standards/foundational/analysis-results-standards) aims to facilitate automation, reproducibility, reusability, and traceability of analysis results data (ARD).
The {cards} package creates these **C**DISC **A**nalysis **R**esult **D**ata **S**ets.

## Installation

You can install the development version of cards from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("insightsengineering/cards")
```

## Example

ARD Examples

```{r example}
library(cards)

ard_continuous(ADSL, by = "ARM", variables = c("AGE", "BMIBL")) |> 
  flatten_ard() |> 
  head(n = 10) |> 
  knitr::kable()

ard_categorical(ADSL, by = "ARM", variables = c("AGEGR1", "SEX")) |> 
  flatten_ard() |> 
  head(n = 10) |> 
  knitr::kable()

ADSL |>
  dplyr::filter(ARM %in% c("Placebo", "Xanomeline High Dose")) |>  # only only two groups for a t-test
  ard_ttest(by = "ARM", variable = "AGE") |> 
  filter_ard(stat_name = c("estimate", "conf.low", "conf.high", "p.value", "method")) |> 
  flatten_ard() |> 
  knitr::kable()

# the example below ignores the time to event nature of the outcome
# and are provided to illustrate functionality only
glm(abs(CNSR - 1) ~ TRTP, data = ADTTE, family = binomial) |>
  ard_regression(add_estimate_to_reference_rows = TRUE) |> 
  filter_ard(stat_name = c("estimate", "conf.low", "conf.high", "p.value")) |> 
  flatten_ard() |> 
  tidyr::drop_na() |>
  knitr::kable()
```
