---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# cards

<!-- badges: start -->
<!-- [![R-CMD-check](https://github.com/insightsengineering/cards/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/insightsengineering/cards/actions/workflows/R-CMD-check.yaml) -->
<!-- [![Codecov test coverage](https://codecov.io/gh/insightsengineering/cards/branch/main/graph/badge.svg)](https://app.codecov.io/gh/insightsengineering/cards?branch=main) -->
<!-- badges: end -->

This package is in a **preliminary state**, and **breaking changes** will be made **without notice or deprecation**.

The [CDISC Analysis Results Standard](https://www.cdisc.org/standards/foundational/analysis-results-standards) aims to facilitate automation, reproducibility, reusability, and traceability of analysis results data (ARD).
The {cards} package creates these **C**DISC **A**nalysis **R**esult **D**ata **S**ets.

## Installation

You can install the development version of cards from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("insightsengineering/cards")
```

## Example

ARD Examples

```{r example}
library(cards)
library(dplyr) |> suppressPackageStartupMessages()

ard_continuous(mtcars, by = "cyl", variables = c("mpg", "hp")) |> 
  flatten_ard() |> 
  head(n = 10) |> 
  knitr::kable()

ard_categorical(mtcars, by = "cyl", variables = c("am", "gear")) |> 
  flatten_ard() |> 
  head(n = 10) |> 
  knitr::kable()

ard_ttest(data = mtcars, by = "am", variable = "hp") |> 
  flatten_ard() |> 
  head(n = 10) |> 
  knitr::kable()

glm(am ~ factor(cyl), data = mtcars, family = binomial) |>
  ard_regression(add_estimate_to_reference_rows = TRUE) |> 
  flatten_ard() |> 
  dplyr::filter(variable_level %in% "8") |> 
  tidyr::drop_na() |> 
  knitr::kable()
```

<!-- ARD  -> Table Example -->

<!-- ```{r} -->
<!-- # Construct the ARD -->
<!-- table_ard <- -->
<!--   bind_rows( -->
<!--     ard_continuous(mtcars, by = cyl, variables = "mpg"), -->
<!--     ard_categorical(mtcars, by = cyl, variables = "am"), -->
<!--     ard_categorical(mtcars, variables = "cyl") -->
<!--   ) -->

<!-- # convert ARD to a cards table -->
<!-- table <- -->
<!--   construct_cards( -->
<!--     table_plan = -->
<!--       bind_rows( -->
<!--         table_ard |> filter(variable %in% "mpg") |>  table_plan_simple_continuous(), -->
<!--         table_ard |> filter(variable %in% "am") |> table_plan_simple_categorical() -->
<!--       ), -->
<!--     header_plan = -->
<!--       table_ard |> -->
<!--       filter(variable %in% "cyl") |> -->
<!--       header_plan_simple(header = "**{group} Cylinders**  \nN={n}  ({p}%)") |> -->
<!--       modifyList(val = list(label = gt::md("**Characteristic**"))) -->
<!--   ) |> -->
<!--   convert_cards(engine = "gt") -->
<!-- ``` -->

<!-- ```{r echo=FALSE, fig.width=4} -->
<!-- gt::gtsave(table, filename = "man/figures/README-table_example.png") -->
<!-- ``` -->

<!-- <img src="man/figures/README-table_example.png" style="width: 50%"> -->
