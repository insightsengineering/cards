<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Long Data Summaries • cards</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Long Data Summaries">
<link rel="stylesheet" href="../consent.css">
<script src="../consent.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cards</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0.9004</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="home"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/long_data.html">Long Data ARDs</a></li>
    <li><a class="dropdown-item" href="../articles/creating-ards.html">Writing ARD Functions</a></li>
    <li><a class="dropdown-item" href="../articles/structures.html">Other ARD Representations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/cards/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Long Data Summaries</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/cards/blob/main/vignettes/articles/long_data.Rmd" class="external-link"><code>vignettes/articles/long_data.Rmd</code></a></small>
      <div class="d-none name"><code>long_data.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/cards" class="external-link">cards</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>The goal of this article is to illustrate which {cards} functions are
used to create long data summaries: think summaries from ADAE, ADLB,
ADCM, and other similarly structured data sets.</p>
<p>Generally, the solution to long data summaries lies with
<code>ard_stack_hierarchical*()</code>, <code><a href="../reference/ard_strata.html">ard_strata()</a></code>, or
even a call to a more basic function like <code><a href="../reference/ard_tabulate.html">ard_tabulate()</a></code>.
Herein, we will review these function and when each is needed.</p>
<div class="section level2">
<h2 id="hierarchical-or-nested-summaries">Hierarchical or Nested Summaries<a class="anchor" aria-label="anchor" href="#hierarchical-or-nested-summaries"></a>
</h2>
<p>The <code>ard_stack_hierarchical*()</code> family of functions are
useful when tabulating hierarchical or nested data <strong>and</strong>
the tabulation needs to be repeated across more than one of the
hierarchies. The most common example is the summary of adverse event
(AE) data.</p>
<div id="mwlefoodfi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mwlefoodfi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mwlefoodfi thead, #mwlefoodfi tbody, #mwlefoodfi tfoot, #mwlefoodfi tr, #mwlefoodfi td, #mwlefoodfi th {
  border-style: none;
}

#mwlefoodfi p {
  margin: 0;
  padding: 0;
}

#mwlefoodfi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 13px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mwlefoodfi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mwlefoodfi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mwlefoodfi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mwlefoodfi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mwlefoodfi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mwlefoodfi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mwlefoodfi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mwlefoodfi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mwlefoodfi .gt_spanner_row {
  border-bottom-style: hidden;
}

#mwlefoodfi .gt_group_heading {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mwlefoodfi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mwlefoodfi .gt_from_md > :first-child {
  margin-top: 0;
}

#mwlefoodfi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mwlefoodfi .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mwlefoodfi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mwlefoodfi .gt_row_group_first td {
  border-top-width: 2px;
}

#mwlefoodfi .gt_row_group_first th {
  border-top-width: 2px;
}

#mwlefoodfi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mwlefoodfi .gt_last_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_last_grand_summary_row_top {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mwlefoodfi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_sourcenote {
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_left {
  text-align: left;
}

#mwlefoodfi .gt_center {
  text-align: center;
}

#mwlefoodfi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mwlefoodfi .gt_font_normal {
  font-weight: normal;
}

#mwlefoodfi .gt_font_bold {
  font-weight: bold;
}

#mwlefoodfi .gt_font_italic {
  font-style: italic;
}

#mwlefoodfi .gt_super {
  font-size: 65%;
}

#mwlefoodfi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mwlefoodfi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mwlefoodfi .gt_indent_1 {
  text-indent: 5px;
}

#mwlefoodfi .gt_indent_2 {
  text-indent: 10px;
}

#mwlefoodfi .gt_indent_3 {
  text-indent: 15px;
}

#mwlefoodfi .gt_indent_4 {
  text-indent: 20px;
}

#mwlefoodfi .gt_indent_5 {
  text-indent: 25px;
}

#mwlefoodfi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mwlefoodfi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="label"><span class="gt_from_md"><strong>Primary System Organ Class</strong><br>
    <strong>Dictionary-Derived Term</strong></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_1"><span class="gt_from_md"><strong>Placebo</strong><br>
N = 86</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_2"><span class="gt_from_md"><strong>Xanomeline High Dose</strong><br>
N = 84</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_3"><span class="gt_from_md"><strong>Xanomeline Low Dose</strong><br>
N = 84</span></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left">Number Subjects with AE</td>
<td headers="stat_1" class="gt_row gt_center">69 (80%)</td>
<td headers="stat_2" class="gt_row gt_center">79 (94%)</td>
<td headers="stat_3" class="gt_row gt_center">77 (92%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">GASTROINTESTINAL DISORDERS</td>
<td headers="stat_1" class="gt_row gt_center">17 (20%)</td>
<td headers="stat_2" class="gt_row gt_center">21 (25%)</td>
<td headers="stat_3" class="gt_row gt_center">15 (18%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    DIARRHOEA</td>
<td headers="stat_1" class="gt_row gt_center">9 (10%)</td>
<td headers="stat_2" class="gt_row gt_center">4 (4.8%)</td>
<td headers="stat_3" class="gt_row gt_center">5 (6.0%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">GENERAL DISORDERS AND ADMINISTRATION SITE CONDITIONS</td>
<td headers="stat_1" class="gt_row gt_center">21 (24%)</td>
<td headers="stat_2" class="gt_row gt_center">40 (48%)</td>
<td headers="stat_3" class="gt_row gt_center">47 (56%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    APPLICATION SITE ERYTHEMA</td>
<td headers="stat_1" class="gt_row gt_center">3 (3.5%)</td>
<td headers="stat_2" class="gt_row gt_center">15 (18%)</td>
<td headers="stat_3" class="gt_row gt_center">12 (14%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    APPLICATION SITE PRURITUS</td>
<td headers="stat_1" class="gt_row gt_center">6 (7.0%)</td>
<td headers="stat_2" class="gt_row gt_center">22 (26%)</td>
<td headers="stat_3" class="gt_row gt_center">22 (26%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    APPLICATION SITE VESICLES</td>
<td headers="stat_1" class="gt_row gt_center">1 (1.2%)</td>
<td headers="stat_2" class="gt_row gt_center">6 (7.1%)</td>
<td headers="stat_3" class="gt_row gt_center">4 (4.8%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td headers="stat_1" class="gt_row gt_center">21 (24%)</td>
<td headers="stat_2" class="gt_row gt_center">42 (50%)</td>
<td headers="stat_3" class="gt_row gt_center">42 (50%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    ERYTHEMA</td>
<td headers="stat_1" class="gt_row gt_center">9 (10%)</td>
<td headers="stat_2" class="gt_row gt_center">14 (17%)</td>
<td headers="stat_3" class="gt_row gt_center">15 (18%)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    PRURITUS GENERALISED</td>
<td headers="stat_1" class="gt_row gt_center">0 (0%)</td>
<td headers="stat_2" class="gt_row gt_center">1 (1.2%)</td>
<td headers="stat_3" class="gt_row gt_center">1 (1.2%)</td>
</tr>
</tbody>
<tfoot><tr class="gt_sourcenotes">
<td class="gt_sourcenote" colspan="4"><span class="gt_from_md">Printing a few illustrative rows from the full table.</span></td>
    </tr></tfoot>
</table>
</div>
<p>In the table above, the AE <em>rates</em> are reported for both the
system organ class (SOC) and AE term. That is, each AE is counted once
per subject and then rate for each AE calculated; this is repeated for
SOC. A call to the <code><a href="../reference/ard_stack_hierarchical.html">ard_stack_hierarchical()</a></code> function will
return an ARD with the adverse event rates, the system organ class
rates, the overall rates (row one from the example table), and the
counts that appear in the header.</p>
<p>To create the ARD for this table, use the
<code><a href="../reference/ard_stack_hierarchical.html">ard_stack_hierarchical()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ard_ae</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">ADAE</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/ard_stack_hierarchical.html">ard_stack_hierarchical</a></span><span class="op">(</span></span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">AESOC</span>, <span class="va">AEDECOD</span><span class="op">)</span>, <span class="co"># report rates for SOC and AE within SOC</span></span>
<span>    by <span class="op">=</span> <span class="va">TRTA</span>, <span class="co"># report all statistics by treatment</span></span>
<span>    id <span class="op">=</span> <span class="va">USUBJID</span>, <span class="co"># used to remove duplicate AEs within subject</span></span>
<span>    denominator <span class="op">=</span> <span class="va">ADSL</span>, <span class="co"># specified the denominator for rate calculations</span></span>
<span>    over_variables <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># include summary statistics for Any AE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The returned ARD contains <em>four stacked sections</em>: AE rates,
SOC rates, Any AE rates, and Treatment counts. Let’s inspect each of
these four sections.</p>
<p><strong>Adverse Event Rates</strong></p>
<p>To calculate the AE event counts, the <code>ADAE</code> data frame is
subset to remove duplicate AEs reported from each subject. From there,
the rates are calculated using the <code>ADSL</code> data frame passed
in the <code>denominator</code> argument.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ard_ae</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">==</span> <span class="st">"AEDECOD"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">{cards} data frame: 2178 x 13</span></span></span>
<span><span class="co">#&gt;    group1 group1_level group2 group2_level variable variable_level stat_name stat_label  stat</span></span>
<span><span class="co">#&gt; 1    TRTA      Placebo  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         n          n     1</span></span>
<span><span class="co">#&gt; 2    TRTA      Placebo  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         N          N    86</span></span>
<span><span class="co">#&gt; 3    TRTA      Placebo  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         p          % 0.012</span></span>
<span><span class="co">#&gt; 4    TRTA    Xanomeli…  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         n          n     3</span></span>
<span><span class="co">#&gt; 5    TRTA    Xanomeli…  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         N          N    84</span></span>
<span><span class="co">#&gt; 6    TRTA    Xanomeli…  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         p          % 0.036</span></span>
<span><span class="co">#&gt; 7    TRTA    Xanomeli…  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         n          n     1</span></span>
<span><span class="co">#&gt; 8    TRTA    Xanomeli…  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         N          N    84</span></span>
<span><span class="co">#&gt; 9    TRTA    Xanomeli…  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         p          % 0.012</span></span>
<span><span class="co">#&gt; 10   TRTA      Placebo  AESOC    CARDIAC …  AEDECOD      ATRIAL F…         n          n     0</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">2168 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span></span></code></pre></div>
<p><strong>System Organ Class Rates</strong></p>
<p>The AE rate process is repeated for SOC.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ard_ae</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">==</span> <span class="st">"AESOC"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="../reference/selectors.html">all_missing_columns</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">{cards} data frame: 207 x 9</span></span></span>
<span><span class="co">#&gt;    group1 group1_level variable variable_level stat_name stat_label  stat</span></span>
<span><span class="co">#&gt; 1    TRTA      Placebo    AESOC      CARDIAC …         n          n    13</span></span>
<span><span class="co">#&gt; 2    TRTA      Placebo    AESOC      CARDIAC …         N          N    86</span></span>
<span><span class="co">#&gt; 3    TRTA      Placebo    AESOC      CARDIAC …         p          % 0.151</span></span>
<span><span class="co">#&gt; 4    TRTA    Xanomeli…    AESOC      CARDIAC …         n          n    18</span></span>
<span><span class="co">#&gt; 5    TRTA    Xanomeli…    AESOC      CARDIAC …         N          N    84</span></span>
<span><span class="co">#&gt; 6    TRTA    Xanomeli…    AESOC      CARDIAC …         p          % 0.214</span></span>
<span><span class="co">#&gt; 7    TRTA    Xanomeli…    AESOC      CARDIAC …         n          n    13</span></span>
<span><span class="co">#&gt; 8    TRTA    Xanomeli…    AESOC      CARDIAC …         N          N    84</span></span>
<span><span class="co">#&gt; 9    TRTA    Xanomeli…    AESOC      CARDIAC …         p          % 0.155</span></span>
<span><span class="co">#&gt; 10   TRTA      Placebo    AESOC      CONGENIT…         n          n     0</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">197 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">2 more variables: context, fmt_fun</span></span></span></code></pre></div>
<p><strong>Any AE Rates</strong></p>
<p>The process is then repeated to calculate rates of any adverse
event.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ard_ae</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">==</span> <span class="st">"..ard_hierarchical_overall.."</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="../reference/selectors.html">all_missing_columns</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">{cards} data frame: 9 x 9</span></span></span>
<span><span class="co">#&gt;   group1 group1_level                     variable variable_level stat_name stat_label  stat</span></span>
<span><span class="co">#&gt; 1   TRTA      Placebo ..ard_hierarchical_overall..           TRUE         n          n    69</span></span>
<span><span class="co">#&gt; 2   TRTA      Placebo ..ard_hierarchical_overall..           TRUE         N          N    86</span></span>
<span><span class="co">#&gt; 3   TRTA      Placebo ..ard_hierarchical_overall..           TRUE         p          % 0.802</span></span>
<span><span class="co">#&gt; 4   TRTA    Xanomeli… ..ard_hierarchical_overall..           TRUE         n          n    79</span></span>
<span><span class="co">#&gt; 5   TRTA    Xanomeli… ..ard_hierarchical_overall..           TRUE         N          N    84</span></span>
<span><span class="co">#&gt; 6   TRTA    Xanomeli… ..ard_hierarchical_overall..           TRUE         p          %  0.94</span></span>
<span><span class="co">#&gt; 7   TRTA    Xanomeli… ..ard_hierarchical_overall..           TRUE         n          n    77</span></span>
<span><span class="co">#&gt; 8   TRTA    Xanomeli… ..ard_hierarchical_overall..           TRUE         N          N    84</span></span>
<span><span class="co">#&gt; 9   TRTA    Xanomeli… ..ard_hierarchical_overall..           TRUE         p          % 0.917</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">2 more variables: context, fmt_fun</span></span></span></code></pre></div>
<p><strong>Treatment Counts</strong></p>
<p>Finally, a univariate tabulation of the <code>TRTA</code> column from
<code>ADSL</code> is included.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ard_ae</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">==</span> <span class="st">"TRTA"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="../reference/selectors.html">all_missing_columns</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">{cards} data frame: 9 x 7</span></span></span>
<span><span class="co">#&gt;   variable variable_level  context stat_name stat_label  stat</span></span>
<span><span class="co">#&gt; 1     TRTA        Placebo tabulate         n          n    86</span></span>
<span><span class="co">#&gt; 2     TRTA        Placebo tabulate         N          N   254</span></span>
<span><span class="co">#&gt; 3     TRTA        Placebo tabulate         p          % 0.339</span></span>
<span><span class="co">#&gt; 4     TRTA      Xanomeli… tabulate         n          n    84</span></span>
<span><span class="co">#&gt; 5     TRTA      Xanomeli… tabulate         N          N   254</span></span>
<span><span class="co">#&gt; 6     TRTA      Xanomeli… tabulate         p          % 0.331</span></span>
<span><span class="co">#&gt; 7     TRTA      Xanomeli… tabulate         n          n    84</span></span>
<span><span class="co">#&gt; 8     TRTA      Xanomeli… tabulate         N          N   254</span></span>
<span><span class="co">#&gt; 9     TRTA      Xanomeli… tabulate         p          % 0.331</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">1 more variable: fmt_fun</span></span></span></code></pre></div>
<!-- TODO: Convert this to a qmd and add an aside about the stack function makes calls to other functions. -->
<p>The package exports a similar function for counting adverse event,
rather than calculating rates:
<code><a href="../reference/ard_stack_hierarchical.html">ard_stack_hierarchical_count()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="stratified-summaries">Stratified Summaries<a class="anchor" aria-label="anchor" href="#stratified-summaries"></a>
</h2>
<p>There are many types of stratified summaries that may be needed to
report results from a trial. We will focus on a common lab summary where
summary statistics are reported by lab type, visit and treatment.</p>
<div id="ybhaaglvij" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ybhaaglvij table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ybhaaglvij thead, #ybhaaglvij tbody, #ybhaaglvij tfoot, #ybhaaglvij tr, #ybhaaglvij td, #ybhaaglvij th {
  border-style: none;
}

#ybhaaglvij p {
  margin: 0;
  padding: 0;
}

#ybhaaglvij .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 13px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ybhaaglvij .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ybhaaglvij .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ybhaaglvij .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ybhaaglvij .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ybhaaglvij .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ybhaaglvij .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ybhaaglvij .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ybhaaglvij .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ybhaaglvij .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ybhaaglvij .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ybhaaglvij .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ybhaaglvij .gt_spanner_row {
  border-bottom-style: hidden;
}

#ybhaaglvij .gt_group_heading {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ybhaaglvij .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ybhaaglvij .gt_from_md > :first-child {
  margin-top: 0;
}

#ybhaaglvij .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ybhaaglvij .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ybhaaglvij .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ybhaaglvij .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ybhaaglvij .gt_row_group_first td {
  border-top-width: 2px;
}

#ybhaaglvij .gt_row_group_first th {
  border-top-width: 2px;
}

#ybhaaglvij .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#ybhaaglvij .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ybhaaglvij .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ybhaaglvij .gt_last_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ybhaaglvij .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#ybhaaglvij .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ybhaaglvij .gt_last_grand_summary_row_top {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ybhaaglvij .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ybhaaglvij .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ybhaaglvij .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ybhaaglvij .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#ybhaaglvij .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ybhaaglvij .gt_sourcenote {
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#ybhaaglvij .gt_left {
  text-align: left;
}

#ybhaaglvij .gt_center {
  text-align: center;
}

#ybhaaglvij .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ybhaaglvij .gt_font_normal {
  font-weight: normal;
}

#ybhaaglvij .gt_font_bold {
  font-weight: bold;
}

#ybhaaglvij .gt_font_italic {
  font-style: italic;
}

#ybhaaglvij .gt_super {
  font-size: 65%;
}

#ybhaaglvij .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ybhaaglvij .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ybhaaglvij .gt_indent_1 {
  text-indent: 5px;
}

#ybhaaglvij .gt_indent_2 {
  text-indent: 10px;
}

#ybhaaglvij .gt_indent_3 {
  text-indent: 15px;
}

#ybhaaglvij .gt_indent_4 {
  text-indent: 20px;
}

#ybhaaglvij .gt_indent_5 {
  text-indent: 25px;
}

#ybhaaglvij .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ybhaaglvij div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="label"><span class="gt_from_md"><strong>Lab<br>
     Visit</strong></span></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="level 1; stat_1_1">
        <div class="gt_column_spanner"><span class="gt_from_md"><strong>Placebo</strong><br>
N = 86</span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="level 1; stat_2_1">
        <div class="gt_column_spanner"><span class="gt_from_md"><strong>Xanomeline High Dose</strong><br>
N = 84</span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="level 1; stat_3_1">
        <div class="gt_column_spanner"><span class="gt_from_md"><strong>Xanomeline Low Dose</strong><br>
N = 84</span></div>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_1_1"><span class="gt_from_md">Value at Visit</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_1_2"><span class="gt_from_md">Change from Baseline</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_2_1"><span class="gt_from_md">Value at Visit</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_2_2"><span class="gt_from_md">Change from Baseline</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_3_1"><span class="gt_from_md">Value at Visit</span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="stat_3_2"><span class="gt_from_md">Change from Baseline</span></th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="label" class="gt_row gt_left" style="font-weight: bold;">Bilirubin (umol/L)</td>
<td headers="stat_1_1" class="gt_row gt_center"><br></td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center"><br></td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center"><br></td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Baseline</td>
<td headers="stat_1_1" class="gt_row gt_center"><br></td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center"><br></td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center"><br></td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        n</td>
<td headers="stat_1_1" class="gt_row gt_center">7</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">7</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">6</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Mean (SD)</td>
<td headers="stat_1_1" class="gt_row gt_center">8.6 (3.0)</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">10.7 (5.1)</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">9.1 (3.0)</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Median</td>
<td headers="stat_1_1" class="gt_row gt_center">8.6</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">10.3</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">7.7</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Min - Max</td>
<td headers="stat_1_1" class="gt_row gt_center">5.1 - 12.0</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">5.1 - 18.8</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">6.8 - 13.7</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Week 24</td>
<td headers="stat_1_1" class="gt_row gt_center"><br></td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center"><br></td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center"><br></td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        n</td>
<td headers="stat_1_1" class="gt_row gt_center">5</td>
<td headers="stat_1_2" class="gt_row gt_center">5</td>
<td headers="stat_2_1" class="gt_row gt_center">4</td>
<td headers="stat_2_2" class="gt_row gt_center">4</td>
<td headers="stat_3_1" class="gt_row gt_center">2</td>
<td headers="stat_3_2" class="gt_row gt_center">2</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Mean (SD)</td>
<td headers="stat_1_1" class="gt_row gt_center">7.87 (2.59)</td>
<td headers="stat_1_2" class="gt_row gt_center">-0.34 (3.06)</td>
<td headers="stat_2_1" class="gt_row gt_center">10.26 (4.19)</td>
<td headers="stat_2_2" class="gt_row gt_center">-2.99 (0.86)</td>
<td headers="stat_3_1" class="gt_row gt_center">9.41 (1.21)</td>
<td headers="stat_3_2" class="gt_row gt_center">0.00 (4.84)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Median</td>
<td headers="stat_1_1" class="gt_row gt_center">6.84</td>
<td headers="stat_1_2" class="gt_row gt_center">0.00</td>
<td headers="stat_2_1" class="gt_row gt_center">9.41</td>
<td headers="stat_2_2" class="gt_row gt_center">-3.42</td>
<td headers="stat_3_1" class="gt_row gt_center">9.41</td>
<td headers="stat_3_2" class="gt_row gt_center">0.00</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Min - Max</td>
<td headers="stat_1_1" class="gt_row gt_center">5.13 - 11.97</td>
<td headers="stat_1_2" class="gt_row gt_center">-3.42 - 3.42</td>
<td headers="stat_2_1" class="gt_row gt_center">6.84 - 15.39</td>
<td headers="stat_2_2" class="gt_row gt_center">-3.42 - -1.71</td>
<td headers="stat_3_1" class="gt_row gt_center">8.55 - 10.26</td>
<td headers="stat_3_2" class="gt_row gt_center">-3.42 - 3.42</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left" style="font-weight: bold;">Creatinine (umol/L)</td>
<td headers="stat_1_1" class="gt_row gt_center"><br></td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center"><br></td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center"><br></td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Baseline</td>
<td headers="stat_1_1" class="gt_row gt_center"><br></td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center"><br></td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center"><br></td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        n</td>
<td headers="stat_1_1" class="gt_row gt_center">7</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">7</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">6</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Mean (SD)</td>
<td headers="stat_1_1" class="gt_row gt_center">97 (18)</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">102 (15)</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">106 (22)</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Median</td>
<td headers="stat_1_1" class="gt_row gt_center">88</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">106</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">111</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Min - Max</td>
<td headers="stat_1_1" class="gt_row gt_center">80 - 124</td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center">80 - 124</td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center">80 - 133</td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">    Week 24</td>
<td headers="stat_1_1" class="gt_row gt_center"><br></td>
<td headers="stat_1_2" class="gt_row gt_center"><br></td>
<td headers="stat_2_1" class="gt_row gt_center"><br></td>
<td headers="stat_2_2" class="gt_row gt_center"><br></td>
<td headers="stat_3_1" class="gt_row gt_center"><br></td>
<td headers="stat_3_2" class="gt_row gt_center"><br></td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        n</td>
<td headers="stat_1_1" class="gt_row gt_center">5</td>
<td headers="stat_1_2" class="gt_row gt_center">5</td>
<td headers="stat_2_1" class="gt_row gt_center">4</td>
<td headers="stat_2_2" class="gt_row gt_center">4</td>
<td headers="stat_3_1" class="gt_row gt_center">2</td>
<td headers="stat_3_2" class="gt_row gt_center">2</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Mean (SD)</td>
<td headers="stat_1_1" class="gt_row gt_center">99 (20)</td>
<td headers="stat_1_2" class="gt_row gt_center">5.3 (4.8)</td>
<td headers="stat_2_1" class="gt_row gt_center">106 (23)</td>
<td headers="stat_2_2" class="gt_row gt_center">2.2 (8.5)</td>
<td headers="stat_3_1" class="gt_row gt_center">102 (31)</td>
<td headers="stat_3_2" class="gt_row gt_center">0.0 (0.0)</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Median</td>
<td headers="stat_1_1" class="gt_row gt_center">97</td>
<td headers="stat_1_2" class="gt_row gt_center">8.8</td>
<td headers="stat_2_1" class="gt_row gt_center">106</td>
<td headers="stat_2_2" class="gt_row gt_center">4.4</td>
<td headers="stat_3_1" class="gt_row gt_center">102</td>
<td headers="stat_3_2" class="gt_row gt_center">0.0</td>
</tr>
<tr>
<td headers="label" class="gt_row gt_left">        Min - Max</td>
<td headers="stat_1_1" class="gt_row gt_center">80 - 133</td>
<td headers="stat_1_2" class="gt_row gt_center">0.0 - 8.8</td>
<td headers="stat_2_1" class="gt_row gt_center">80 - 133</td>
<td headers="stat_2_2" class="gt_row gt_center">-8.8 - 8.8</td>
<td headers="stat_3_1" class="gt_row gt_center">80 - 124</td>
<td headers="stat_3_2" class="gt_row gt_center">0.0 - 0.0</td>
</tr>
</tbody>
<tfoot><tr class="gt_sourcenotes">
<td class="gt_sourcenote" colspan="7"><span class="gt_from_md">Printing a few illustrative rows from the full table.</span></td>
    </tr></tfoot>
</table>
</div>
<p>To build the ARD for this table, we use the
<code><a href="../reference/ard_summary.html">ard_summary()</a></code>.</p>
<ul>
<li><p><code>ard_summary(by="TRTA")</code>: Use the <code>by</code>
argument ensures each level of treatment has all associated summary
statistics, even if there are combinations that are unobserved or all
<code>NA</code>.</p></li>
<li><p><code>ard_summary(strata=c("PARAM", "AVISIT")</code>: The strata
argument will produce summary statistics for all <em>observed
combinations</em> of <code>'PARAM'</code> and <code>'AVISIT'</code>. We
opt to use <code>strata</code> because it is common a trial will not
collect all labs at each visit, and we don’t want to report that
bilirubin had no observations at week xx when it was never meant to be
collected at that visit, for example.</p></li>
<li><p><code>ard_summary(variables=c("AVAL", "CHG"))</code>: These are
the variables that will be summarized within <code>'TRTA'</code>,
<code>'PARAM'</code>, and <code>'AVISIT'</code>.</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ADLB</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># subset on two labs and two study visits</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">PARAMCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BILI"</span>, <span class="st">"CREAT"</span><span class="op">)</span>,</span>
<span>    <span class="va">AVISIT</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Baseline"</span>, <span class="st">"Week 24"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/ard_summary.html">ard_summary</a></span><span class="op">(</span></span>
<span>    <span class="co"># calculate statistics by observed combinations of PARAM on AVISIT</span></span>
<span>    strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PARAM"</span>, <span class="st">"AVISIT"</span><span class="op">)</span>,</span>
<span>    <span class="co"># `by='TRTA'` will provide results for each of the treatments, even if unobserved</span></span>
<span>    by <span class="op">=</span> <span class="st">"TRTA"</span>,</span>
<span>    <span class="co"># provide summaries for the measurement and its change from baseline</span></span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"CHG"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">{cards} data frame: 192 x 14</span></span></span>
<span><span class="co">#&gt;    group1 group1_level group2 group2_level group3 group3_level variable stat_name stat_label  stat</span></span>
<span><span class="co">#&gt; 1    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL         N          N     7</span></span>
<span><span class="co">#&gt; 2    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL      mean       Mean  8.55</span></span>
<span><span class="co">#&gt; 3    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL        sd         SD 2.962</span></span>
<span><span class="co">#&gt; 4    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL    median     Median  8.55</span></span>
<span><span class="co">#&gt; 5    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL       p25         Q1  5.13</span></span>
<span><span class="co">#&gt; 6    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL       p75         Q3 11.97</span></span>
<span><span class="co">#&gt; 7    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL       min        Min  5.13</span></span>
<span><span class="co">#&gt; 8    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline     AVAL       max        Max 11.97</span></span>
<span><span class="co">#&gt; 9    TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline      CHG         N          N     0</span></span>
<span><span class="co">#&gt; 10   TRTA      Placebo  PARAM    Bilirubi… AVISIT     Baseline      CHG      mean       Mean   NaN</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">182 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span></span></code></pre></div>
<p>There are some cases, where slightly different behavior is needed
within stratum. In these cases, use the <code><a href="../reference/ard_strata.html">ard_strata()</a></code>
function. For example, if we were tabulating character
<code>AVALC</code> values, and the possible values are different
depending on <code>PARAM</code>, the code may look something like
this:</p>
<!-- TODO: Should we update to use pharmaverseadam? That ADLB has a AVALC. -->
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ard_strata.html">ard_strata</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ADLB</span>,</span>
<span>  .strata <span class="op">=</span> <span class="st">"PARAM"</span>,</span>
<span>  .f <span class="op">=</span> \<span class="op">(</span><span class="va">data_param</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># set factor depending on the PARAM value</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">data_param</span><span class="op">$</span><span class="va">PARAM</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="st">"XXX"</span><span class="op">)</span> <span class="va">data_param</span><span class="op">$</span><span class="va">AVALC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data_param</span><span class="op">$</span><span class="va">AVALC</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"No"</span>, <span class="st">"Yes"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">data_param</span><span class="op">$</span><span class="va">PARAM</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="st">"YYY"</span><span class="op">)</span> <span class="va">data_param</span><span class="op">$</span><span class="va">AVALC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data_param</span><span class="op">$</span><span class="va">AVALC</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="fu"><a href="../reference/ard_tabulate.html">ard_tabulate</a></span><span class="op">(</span></span>
<span>      <span class="va">data_param</span>,</span>
<span>      strata <span class="op">=</span> <span class="st">"AVISIT"</span>,</span>
<span>      by <span class="op">=</span> <span class="st">"TRTA"</span>,</span>
<span>      variable <span class="op">=</span> <span class="st">"AVALC"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="nest">
  <p>cards is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer>
</div>





  </body>
</html>
