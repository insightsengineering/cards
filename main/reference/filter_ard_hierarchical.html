<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Filter Stacked Hierarchical ARDs — filter_ard_hierarchical • cards</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Filter Stacked Hierarchical ARDs — filter_ard_hierarchical"><meta name="description" content='
This function is used to filter stacked hierarchical ARDs.
For the purposes of this function, we define a "variable group" as a combination of ARD rows
grouped by the combination of all their variable levels, but excluding any by variables.'><meta property="og:description" content='
This function is used to filter stacked hierarchical ARDs.
For the purposes of this function, we define a "variable group" as a combination of ARD rows
grouped by the combination of all their variable levels, but excluding any by variables.'><meta property="og:image" content="https://insightsengineering.github.io/cards/logo.png"><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cards</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1.9015</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/creating-ards.html">Creating New ARDs</a></li>
    <li><a class="dropdown-item" href="../articles/structures.html">Other ARD Representations</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/cards/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Filter Stacked Hierarchical ARDs</h1>
      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/cards/blob/main/R/filter_ard_hierarchical.R" class="external-link"><code>R/filter_ard_hierarchical.R</code></a></small>
      <div class="d-none name"><code>filter_ard_hierarchical.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a><br></p>
<p>This function is used to filter stacked hierarchical ARDs.</p>
<p>For the purposes of this function, we define a "variable group" as a combination of ARD rows
grouped by the combination of all their variable levels, but excluding any <code>by</code> variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_ard_hierarchical</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">filter</span>,</span>
<span>  var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_empty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>(<code>card</code>)<br>
a stacked hierarchical ARD of class <code>'card'</code> created using <code><a href="ard_stack_hierarchical.html">ard_stack_hierarchical()</a></code> or
<code><a href="ard_stack_hierarchical.html">ard_stack_hierarchical_count()</a></code>.</p></dd>


<dt id="arg-filter">filter<a class="anchor" aria-label="anchor" href="#arg-filter"></a></dt>
<dd><p>(<code>expression</code>)<br>
an expression that is used to filter variable groups of the hierarchical ARD. See the
Details section below.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>(<code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a></code>)<br>
hierarchy variable from <code>x</code> to perform filtering on. If <code>NULL</code>, the last hierarchy variable
from <code>x</code> (<code>dplyr::last(attributes(x)$args$variables)</code>) will be used.</p></dd>


<dt id="arg-keep-empty">keep_empty<a class="anchor" aria-label="anchor" href="#arg-keep-empty"></a></dt>
<dd><p>(scalar <code>logical</code>)<br>
Logical argument indicating whether to retain summary rows corresponding to hierarchy
sections that have had all rows filtered out. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>(<code>logical</code>)<br>
logical indicating whether to suppress any messaging. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an ARD data frame of class 'card'</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>filter</code> argument can be used to filter out variable groups of a hierarchical
ARD which do not meet the requirements provided as an expression.
Variable groups can be filtered on the values of any of the possible
statistics (<code>n</code>, <code>p</code>, and <code>N</code>) provided they are included at least once
in the ARD, as well as the values of any <code>by</code> variables.</p>
<p>Additionally, filters can be applied on individual levels of the <code>by</code> variable via the
<code>n_XX</code>, <code>N_XX</code>, and <code>p_XX</code> statistics, where each <code>XX</code> represents the index of the <code>by</code>
variable level to select the statistic from. For example, <code>filter = n_1 &gt; 5</code> will check
whether <code>n</code> values for the first level of <code>by</code> are greater than 5 in each row group.</p>
<p>Overall statistics for each row group can be used in filters via the <code>n_overall</code>, <code>N_overall</code>,
and <code>p_overall</code> statistics. If the ARD is created with parameter <code>overall=TRUE</code>, then these
overall statistics will be extracted directly from the ARD, otherwise the statistics will be
derived where possible. If <code>overall=FALSE</code>, then <code>n_overall</code> can only be derived if the <code>n</code>
statistic is present in the ARD for the filter variable, <code>N_overall</code> if the <code>N</code> statistic is
present for the filter variable, and <code>p_overall</code> if both the <code>n</code> and <code>N</code> statistics are
present for the filter variable.</p>
<p>By default, filters will be applied at the level of the innermost hierarchy variable, i.e.
the last variable supplied to <code>variables</code>. If filters should instead be applied at the level
of one of the outer hierarchy variables, the <code>var</code> parameter can be used to select a different
variable to filter on. When <code>var</code> is set to a different (outer) variable and a level of the
variable does not meet the filtering criteria then the section corresponding to that variable
level and all sub-sections within that section will be removed.</p>
<p>To illustrate how the function works, consider the typical example below
where the AE summaries are provided by treatment group.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">ADAE</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AESOC</span> <span class="op">==</span> <span class="st">"GASTROINTESTINAL DISORDERS"</span>,</span>
<span>                <span class="va">AEDECOD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VOMITING"</span>, <span class="st">"DIARRHOEA"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/ard_stack_hierarchical.html">ard_stack_hierarchical</a></span><span class="op">(</span></span>
<span>    variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">AESOC</span>, <span class="va">AEDECOD</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="va">TRTA</span>,</span>
<span>    denominator <span class="op">=</span> <span class="va">ADSL</span>,</span>
<span>    id <span class="op">=</span> <span class="va">USUBJID</span></span>
<span>  <span class="op">)</span></span></code></pre><p></p></div><table class="table table"><tr><td><strong>SOC</strong> / AE</td><td>Placebo</td><td>Xanomeline High Dose</td><td>Xanomeline Low Dose</td></tr><tr><td><strong>GASTROINTESTINAL DISORDERS</strong></td><td>11 (13%)</td><td>10 (12%)</td><td>8 (9.5%)</td></tr><tr><td>DIARRHOEA</td><td>9 (10%)</td><td>4 (4.8%)</td><td>5 (6.0%)</td></tr><tr><td>VOMITING</td><td>3 (3.5%)</td><td>7 (8.3%)</td><td>3 (3.6%)</td></tr></table><p>Filters are applied to the summary statistics of the innermost variable in the hierarchy by
default—<code>AEDECOD</code> in this case. If we wanted to filter based on SOC rates instead of AE
rates we could specify <code>var = AESOC</code> instead.
If any of the summary statistics meet the filter requirement for any of the treatment groups,
the entire row is retained.
For example, if <code>filter = n &gt;= 9</code> were passed, the criteria would be met for DIARRHOEA
as the Placebo group observed 9 AEs and as a result the summary statistics for the other
treatment groups would be retained as well.
Conversely, no treatment groups' summary statistics satisfy the filter requirement
for VOMITING so all rows associated with this AE would be removed.</p>
<p>In addition to filtering on individual statistic values, filters can be applied
across the treatment groups (i.e. across all <code>by</code> variable values) by using
aggregate functions such as <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code> and <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>. For simplicity, it is suggested to use
the <code>XX_overall</code> statistics in place of <code>sum(XX)</code> in equivalent scenarios. For example,
<code>n_overall</code> is equivalent to <code>sum(n)</code>.
A value of <code>filter = sum(n) &gt;= 18</code> (or <code>filter = n_overall &gt;= 18</code>) retains AEs where the sum of
the number of AEs across the treatment groups is greater than or equal to 18.</p>
<p>If <code>filter = n_overall &gt;= 18</code> and <code>var = AESOC</code> then all rows corresponding to an SOC with an
overall rate less than 18 - including all AEs within that SOC - will be removed.</p>
<p>If <code>ard_stack_hierarchical(overall=TRUE)</code> was run, the overall column is <strong>not</strong> considered in
any filtering except for <code>XX_overall</code> statistics, if specified.</p>
<p>If <code>ard_stack_hierarchical(over_variables=TRUE)</code> was run, any overall statistics are kept regardless
of filtering.</p>
<p>Some examples of possible filters:</p><ul><li><p><code>filter = n &gt; 5</code>: keep AEs where one of the treatment groups observed more than 5 AEs</p></li>
<li><p><code>filter = n == 2 &amp; p &lt; 0.05</code>: keep AEs where one of the treatment groups observed exactly 2
AEs <em>and</em> one of the treatment groups observed a proportion less than 5%</p></li>
<li><p><code>filter = n_overall &gt;= 4</code>: keep AEs where there were 4 or more AEs observed across the treatment groups</p></li>
<li><p><code>filter = mean(n) &gt; 4 | n &gt; 3</code>: keep AEs where the mean number of AEs is 4 or more across the
treatment groups <em>or</em> one of the treatment groups observed more than 3 AEs</p></li>
<li><p><code>filter = n_2 &gt; 2</code>: keep AEs where the <code>"Xanomeline High Dose"</code> treatment group (second <code>by</code> variable
level) observed more than 2 AEs</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="sort_ard_hierarchical.html">sort_ard_hierarchical()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># create a base AE ARD</span></span></span>
<span class="r-in"><span><span class="va">ard</span> <span class="op">&lt;-</span> <span class="fu"><a href="ard_stack_hierarchical.html">ard_stack_hierarchical</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">ADAE</span>,</span></span>
<span class="r-in"><span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">AESOC</span>, <span class="va">AEDECOD</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="va">TRTA</span>,</span></span>
<span class="r-in"><span>  denominator <span class="op">=</span> <span class="va">ADSL</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="va">USUBJID</span>,</span></span>
<span class="r-in"><span>  overall <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Keep AEs from TRTA groups where more than 3 AEs are observed across the group</span></span></span>
<span class="r-in"><span><span class="fu">filter_ard_hierarchical</span><span class="op">(</span><span class="va">ard</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">{cards} data frame: 477 x 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group1 group1_level group2 group2_level variable variable_level stat_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   TRTA      Placebo   &lt;NA&gt;                 AESOC      CARDIAC …         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stat_label  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           n    86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           % 0.339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          n    13</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">467 more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Keep AEs where at least one level in the TRTA group has more than 3 AEs observed</span></span></span>
<span class="r-in"><span><span class="fu">filter_ard_hierarchical</span><span class="op">(</span><span class="va">ard</span>, <span class="va">n</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">{cards} data frame: 306 x 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group1 group1_level group2 group2_level variable variable_level stat_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   TRTA      Placebo   &lt;NA&gt;                 AESOC      CARDIAC …         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stat_label  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           n    86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           % 0.339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          n    13</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">296 more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Keep AEs that have an overall prevalence of greater than 5%</span></span></span>
<span class="r-in"><span><span class="fu">filter_ard_hierarchical</span><span class="op">(</span><span class="va">ard</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">{cards} data frame: 198 x 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group1 group1_level group2 group2_level variable variable_level stat_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   TRTA      Placebo   &lt;NA&gt;                 AESOC      CARDIAC …         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stat_label  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           n    86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           % 0.339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          n    13</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">188 more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Keep AEs that have a difference in prevalence of greater than 3% between reference group with</span></span></span>
<span class="r-in"><span><span class="co"># `TRTA = "Xanomeline High Dose"` and comparison group with `TRTA = "Xanomeline Low Dose"`</span></span></span>
<span class="r-in"><span><span class="fu">filter_ard_hierarchical</span><span class="op">(</span><span class="va">ard</span>, <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">p_2</span> <span class="op">-</span> <span class="va">p_3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0.03</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> When applying filters on specific levels of `by` variable <span style="color: #0000BB;">"TRTA"</span> xx_1 =</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> "Placebo", xx_2 = "Xanomeline High Dose", and xx_3 = "Xanomeline Low Dose".</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">{cards} data frame: 162 x 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group1 group1_level group2 group2_level variable variable_level stat_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   TRTA      Placebo   &lt;NA&gt;                 AESOC      CARDIAC …         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stat_label  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           n    86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           % 0.339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          n    13</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">152 more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 5 ----------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Keep AEs from SOCs that have an overall prevalence of greater than 20%</span></span></span>
<span class="r-in"><span><span class="fu">filter_ard_hierarchical</span><span class="op">(</span><span class="va">ard</span>, <span class="va">p_overall</span> <span class="op">&gt;</span> <span class="fl">0.20</span>, var <span class="op">=</span> <span class="va">AESOC</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">{cards} data frame: 882 x 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group1 group1_level group2 group2_level variable variable_level stat_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    &lt;NA&gt;                &lt;NA&gt;                  TRTA        Placebo         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    &lt;NA&gt;                &lt;NA&gt;                  TRTA      Xanomeli…         p</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   TRTA      Placebo   &lt;NA&gt;                 AESOC      GASTROIN…         n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stat_label  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           n    86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           % 0.339</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           n    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           N   254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           % 0.331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          n    17</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">872 more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">Use `print(n = ...)` to see more rows</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">4 more variables: context, fmt_fun, warning, error</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>cards is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>





  </body></html>

